<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Login</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-5">
<h3>Login Firebase</h3>
<input id="usuario" class="form-control mb-2" placeholder="USUARIO">
<input id="pass" type="password" class="form-control mb-2" placeholder="CONTRASEÑA">
<button class="btn btn-primary" onclick="login()">Ingresar</button>


<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, set, get, child, update, remove } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyDakM1BpK2EF8QrMcurDVodrG8LhVbtydo",
  authDomain: "mydbu-fbc33.firebaseapp.com",
  projectId: "mydbu-fbc33",
  storageBucket: "mydbu-fbc33.firebasestorage.app",
  messagingSenderId: "3794457198",
  appId: "1:3794457198:web:b591c3bdfbb06f1cf54c7f",
  measurementId: "G-NXX5XDXYWB"
};

window.app = initializeApp(firebaseConfig);
window.db = getDatabase(app);
</script>


<script type="module">
import { ref, get } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

window.login = async function(){
  const u = usuario.value.toUpperCase();
  const p = pass.value;
  const snap = await get(ref(db, 'personal/' + u));
  if(!snap.exists()){ alert('Usuario no existe'); return; }
  if(snap.val().contrasena !== p){ alert('Contraseña incorrecta'); return; }
  localStorage.setItem('usuarioLogueado', u);
  window.location.href = 'tecnologia.html';
}
</script>
</body>
</html>
