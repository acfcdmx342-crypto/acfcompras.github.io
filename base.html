
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Base</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">

<h3>Registro de Personal</h3>
<input id="usuario" placeholder="USUARIO" class="form-control mb-2">
<input id="contrasena" placeholder="CONTRASEÃ‘A" class="form-control mb-2">
<button class="btn btn-success" onclick="guardar()">Guardar</button>

<table class="table mt-4">
<thead><tr><th>Usuario</th><th>Status</th></tr></thead>
<tbody id="tabla"></tbody>
</table>

<script type="module">
import { db } from "./firebase.js";
import { ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

window.guardar = async () => {
  const u = usuario.value.toUpperCase();
  const c = contrasena.value;
  await set(ref(db, "personal/" + u), {
    usuario: u,
    contrasena: c,
    bloqueado: false
  });
  usuario.value = contrasena.value = "";
};

onValue(ref(db, "personal"), snap => {
  tabla.innerHTML = "";
  snap.forEach(c => {
    const u = c.val();
    tabla.innerHTML += `<tr><td>${u.usuario}</td><td>${u.bloqueado ? "Bloqueado":"Activo"}</td></tr>`;
  });
});
</script>
</body>
</html>
